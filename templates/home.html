{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    />
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <title>Article Search Scraper</title>
  </head>
  <body class="container bg-light ">
    <div class="container flex-column d-flex col-8 align-items-center pt-4">
      <h1>Article Search</h1>

      <form class="form mt-3 flex-column d-flex justify-content-center"  method="post" action="{% url 'scrape' %}">
        {% csrf_token %}

        <div class="form-group mx-2">
          <input
            type="text"
            class="form-control"
            name="url"
            placeholder="Enter keyword here..."
          />
        </div>

        <div class="form-group mx-2 d-flex justify-content-center">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="source"
              id="googleScholar"
              value="google_scholar"
            />
            <label class="form-check-label" for="googleScholar"
              >Google Scholar</label
            >
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="source"
              id="dergiPark"
              value="dergipark"
              checked

            />
            <label class="form-check-label" for="dergiPark">DergiPark</label>
          </div>
        </div>

        <button class="btn btn-success" type="submit">Search</button>
      </form>
    </div>

    <br />

    <div class="container mt-5">
      <h1 class="text-center">Articles DB</h1>
      <p>{% if publications.count %}{{publications.count}} Results Found.{% else %} There is no Article in DB.{%endif%}</p>
      <div class="container row d-flex flex-row justify-content-between">

        <form class="form-inline" method="get" action="{% url 'publication_list' %}">
          <div class="mb-3">
              <label for="author" class="form-label">Author:</label>
              <input type="text" name="author" id="author" class="form-control" value="{{ request.GET.author }}">
          </div>
      
          <div class="mb-3">
              <label for="title" class="form-label">Title:</label>
              <input type="text" name="title" id="title" class="form-control" value="{{ request.GET.title }}">
          </div>
      
          <button type="submit" class="btn btn-primary">Filter</button>
      </form>
      
      <form class="form-inline" method="get" action="{% url 'publication_list' %}">
        <div class="mb-3">
            <input type="hidden" name="author" id="author" class="form-control" value="">
        </div>
  
        <div class="mb-3">
            <input type="hidden" name="title" id="title" class="form-control" value="">
        </div>
        <button type="submit" class="btn btn-warning">Reset Filter</button>
  
    </form>
      </div>
      <table class="table table-hover">
        <thead class="thead-dark">
          <tr>
            <th scope="col">Title</th>
            <th scope="col">Author(s)</th>

            <th scope="col">Download</th>
          </tr>
        </thead>
        <tbody>
          {% for publication in publications %}
          <tr>
            <td>
              <a
                href="{% url 'publication_details' id=publication.id %}"
                class="text-decoration-none"
                >{{ publication.title|truncatewords:10 }}</a
              >
            </td>
            <td>{{ publication.authors }}</td>

            <td>
              <a
                href="{{ publication.url }}"
                download="{{ publication.title }}.pdf"
                class="btn btn-danger {% if not publication.url %} disabled {% endif %}"
                >Download</a
              >
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
   
  </body>
  <script>
    $('input[name="dates"]').daterangepicker();

    </script>

</html>
