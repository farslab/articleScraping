{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <title>Article Search Scraper</title>
  </head>
  <body class="container bg-light ">
    <div class="container flex-column d-flex col-8 align-items-center pt-4">
      <h1>Article Search</h1>

      <form class="form mt-3 flex-column d-flex justify-content-center"  method="post" action="{% url 'scrape' %}">
        {% csrf_token %}

        <div class="form-group mx-2">
          <input
            type="text"
            class="form-control"
            name="url"
            placeholder="Enter keyword here..."
          />
        </div>

        <div class="form-group mx-2 d-flex justify-content-center">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="source"
              id="googleScholar"
              value="google_scholar"
            />
            <label class="form-check-label" for="googleScholar"
              >Google Scholar</label
            >
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="source"
              id="dergiPark"
              value="dergipark"
              checked

            />
            <label class="form-check-label" for="dergiPark">DergiPark</label>
          </div>
        </div>

        <button class="btn btn-success" type="submit">Search</button>
      </form>
    </div>

    <br />

    <div class="container mt-5">
      <h1 class="text-center">Articles DB</h1>
      <p>{% if previousResults.count %}{{previousResults.count}} Results Found.{% else %} There is no Article in DB.{%endif%}</p>
      <table class="table table-hover">
        <thead class="thead-dark">
          <tr>
            <th scope="col">Title</th>
            <th scope="col">Author(s)</th>

            <th scope="col">Download</th>
          </tr>
        </thead>
        <tbody>
          {% for previousObject in previousResults %}
          <tr>
            <td>
              <a
                href="{% url 'publication_details' id=previousObject.id %}"
                class="text-decoration-none"
                >{{ previousObject.title|truncatewords:10 }}</a
              >
            </td>
            <td>{{ previousObject.authors }}</td>

            <td>
              <a
                href="{{ previousObject.url }}"
                download="{{ previousObject.title }}.pdf"
                class="btn btn-danger {% if not previousObject.url %} disabled {% endif %}"
                >Download</a
              >
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </body>
</html>
